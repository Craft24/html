<html>
<head>
<script src="../ccms/ccms_jquery1.4.2/jquery-1.4.2.js" type="text/javascript"></script>
<script type="text/javascript">
	
	var $ser_ip;
	var $usr;
 	var $pass;
 	$(function(){
 		
		var datas="action=getip";
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"json",
     	success: function(data) {
     		if(data.ok == 'ok')
     		{
      		$("#serip").val(data.ip);
      	}
      
      }
    });
 	});
 	
 	function link(){
 		
 		$ser_ip = $("#serip").val();
 		$usr = $("#user").val();
 		$pass = $("#pass").val();
  	var url="http://"+$ser_ip+"/ccms/vicidial_interface.php?action=Authenticate&user="+$usr+"&pass="+$pass;
  	$("#childPage").attr("src", url);
  	
  }

	function tel(){
		
		
		var datas="action=tel&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass+"&phone="+$("#phonenumber").val();
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"json",
     	success: function(data) {
    
      }
    });
	}

	function getNumber(){

		var datas="action=getNumber&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
     		if(data.ok == 'ok')
     		{
      		$("#phonenumber").val(data.number);
      	}
      
      }
    });
	}
	
	function ready(){
		var datas="action=ready&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
      }
    });
	}
	
	function pause(){
		var datas="action=pause&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {

      }
    });
	}
	function logout(){
		var datas="action=logout&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
      
      }
    });
	}		
	function login(){
		var datas="action=login&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
      }
    });
	}				
	function recordlist(){
		var datas="action=recordlist&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
      }
    });
	}
	function record_download(){
		var datas="action=record_download&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
		  }
		});
		
	}
	function messagelist(){
		var datas="action=messagelist&ser_ip="+$ser_ip+"&user="+$usr+"&pass="+$pass;
		
		$.ajax({
			url:"c.php",
			data: datas,
			type:"post",
			dataType:"JSON",
     	success: function (data) {
      }
    });
	}		
	
</script>
</head>
<body>
<div style="background: lightblue;">
<hr>	
<div align="center">
<a>接口测试</a>
<br>
<hr>
<a> SERVER IP:</a> <input type="text" id = "serip" value="" />
<a> 用户:</a> <input type="text" id = "user" value="22222" />
<a> 密码:</a> <input type="text" id = "pass" value="22222" /> 
<input type="button" value=" 打开链接" onclick="link();" />
</div>
<hr>
<a >电话号码:</a> <input type="text" id = "phonenumber" value="13176661665" />
<br>

<div align="center">
	<input type="button" value="拨号" onclick="tel();" />
	<input type="button" value="电话受理" onclick="getNumber();" />
	<input type="button" value="就绪" onclick="ready();" />
	<input type="button" value="暂停" onclick="pause();" />
	<input type="button" value="录音" onclick="recordlist();" />

	<input type="button" value="留言" onclick="messagelist();" />	
	<!--<input type="button" value="录音下载" onclick="record_download();" />-->
	<input type="button" value="退出" onclick="logout();" />
	<input type="button" value="登录" onclick="login();" />
</div>
<hr>
</div>

<iframe id="childPage" name="childPage" src="" width="100%" height="100%" frameborder="0"></iframe>

</body>
</html>








